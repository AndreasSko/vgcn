{
	"variables": {
		"iso_url": "https://mirrors.kernel.org/centos/7/isos/x86_64/CentOS-7-x86_64-NetInstall-1708.iso",
		"iso_checksum": "fe3d960cce4d2c1c9f1b66817fe87cc0ee1a1c6c5dd126204cb5c33d51a45620",
		"iso_checksum_type": "sha256",
		"vm_name": "centos-7.x-x86_64",
		"http_dir": "http",
		"kickstart_path": "centos-7.x/anaconda-ks.cfg",
		"shutdown_command": "systemctl poweroff",
		"ssh_password": "{{ env `ROOTPW` }}"
	},
	"builders": [{
		"type": "qemu",
		"iso_url": "{{ user `iso_url` }}",
		"iso_checksum": "{{ user `iso_checksum` }}",
		"iso_checksum_type": "{{ user `iso_checksum_type` }}",
		"output_directory": "output-{{ user `vm_name` }}-{{ build_type }}",
		"vm_name": "{{ user `vm_name` }}",
		"format": "qcow2",
		"disk_size": "{{ user `disk_size` }}",
		"disk_interface": "virtio-scsi",
		"headless": "{{ user `headless` }}",
		"http_directory": "{{ user `http_dir` }}",
		"boot_command": [ 
			"<esc><wait>",
			"linux inst.gpt biosdevname=0 net.ifnames=0 ",
			"rootpw={{ user `ssh_password` }} ",
			"inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/{{ user `kickstart_path` }}",
			"<enter>"
		],
		"boot_wait": "{{ user `boot_wait` }}",
		"ssh_timeout": "{{ user `ssh_timeout` }}",
		"ssh_username": "{{ user `ssh_username` }}",
		"ssh_password": "{{ user `ssh_password` }}",
		"shutdown_command": "{{ user `shutdown_command` }}",
		"qemuargs": [
			["-m", "{{ user `memory` }}"]
		]
	}, {
		"type": "virtualbox-iso",
		"guest_os_type": "RedHat_64",
		"iso_url": "{{ user `iso_url` }}",
		"iso_checksum": "{{ user `iso_checksum` }}",
		"iso_checksum_type": "{{ user `iso_checksum_type` }}",
		"output_directory": "output-{{ user `vm_name` }}-{{ build_type }}",
		"vm_name": "{{ user `vm_name` }}",
		"disk_size": "{{ user `disk_size` }}",
		"headless": "{{ user `headless` }}",
		"http_directory": "{{ user `http_dir` }}",
		"boot_command": [ 
			"<esc><wait>",
			"linux inst.gpt biosdevname=0 net.ifnames=0 ",
			"rootpw={{ user `ssh_password` }} ",
			"inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/{{ user `kickstart_path` }}",
			"<enter>"
		],
		"boot_wait": "{{ user `boot_wait` }}",
		"ssh_timeout": "{{ user `ssh_timeout` }}",
		"ssh_username": "{{ user `ssh_username` }}",
		"ssh_password": "{{ user `ssh_password` }}",
		"shutdown_command": "{{ user `shutdown_command` }}",
		"vboxmanage": [
			["modifyvm", "{{ .Name }}", "--memory", "{{ user `memory` }}"],
			["modifyvm", "{{ .Name }}", "--cpus", "{{ user `cpus` }}"]
		]
	}, {
		"type": "vmware-iso",
		"guest_os_type": "centos-64",
		"iso_url": "{{ user `iso_url` }}",
		"iso_checksum": "{{ user `iso_checksum` }}",
		"iso_checksum_type": "{{ user `iso_checksum_type` }}",
		"output_directory": "output-{{ user `vm_name` }}-{{ build_type }}",
		"vm_name": "{{ user `vm_name` }}",
		"disk_size": "{{ user `disk_size` }}",
		"headless": "{{ user `headless` }}",
		"http_directory": "{{ user `http_dir` }}",
		"boot_command": [ 
			"<esc><wait>",
			"linux inst.gpt biosdevname=0 net.ifnames=0 ",
			"rootpw={{ user `ssh_password` }} ",
			"inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/{{ user `kickstart_path` }}",
			"<enter>"
		],
		"boot_wait": "{{ user `boot_wait` }}",
		"ssh_timeout": "{{ user `ssh_timeout` }}",
		"ssh_username": "{{ user `ssh_username` }}",
		"ssh_password": "{{ user `ssh_password` }}",
		"shutdown_command": "{{ user `shutdown_command` }}",
		"vmx_data": {
			"memsize": "{{ user `memory` }}",
			"numvcpus": "{{ user `cpus` }}"
		}
	}],
	"post-processors": [{
		"type": "manifest",
		"output": "output-{{ user `vm_name` }}-{{ build_type }}/manifest.json"
	}]
}
