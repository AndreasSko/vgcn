---
- name: Install packages
  yum:
    name: "{{ item }}"
    state: present
  with_items:
    - epel-release
    - patch
    - lsof
    - screen
    - ansible
    - vim
    - collectl
    - iotop
    - iftop
    - htop
    - atop
    - mosh
    - libcgroup-tools
    - autofs
    - bind-utils
    - strace
    - nfs-utils
    - "@development"

- name: Ensure services are enabled + started
  systemd:
    name: "{{ item }}"
    enabled: yes
    state: started
  with_items:
    - atop
    - autofs

- name: yum-autoupdate removal
  yum: name=yum-autoupdate state=absent

- name: lock root account
  command: usermod --lock root

- name: hashicorp vault
  get_url:
    url: https://releases.hashicorp.com/vault/0.10.1/vault_0.10.1_linux_amd64.zip
    dest: /tmp/vault.zip

- name: install hashicorp vault client
  unarchive:
    src: /tmp/vault.zip
    dest: /usr/bin/
    remote_src: yes
    owner: root
    group: root
    mode: 755
